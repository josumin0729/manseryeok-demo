<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë§Œì„¸ë ¥ ë‹¬ë ¥</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Apple SD Gothic Neo", sans-serif;
      background: #ffffff;
      color: #000000;
      line-height: 1.6;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    /* í—¤ë” */
    header {
      text-align: center;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 1px solid #e0e0e0;
    }

    h1 {
      font-size: 26px;
      font-weight: 600;
      margin-bottom: 8px;
      letter-spacing: -0.5px;
    }

    .subtitle {
      font-size: 14px;
      color: #666666;
    }

    /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
    .tabs {
      display: flex;
      gap: 0;
      margin-bottom: 30px;
      border-bottom: 1px solid #e0e0e0;
    }

    .tab {
      flex: 1;
      padding: 14px 20px;
      background: #ffffff;
      border: none;
      cursor: pointer;
      font-size: 15px;
      color: #666666;
      border-bottom: 2px solid transparent;
      transition: all 0.2s;
      font-weight: 500;
    }

    .tab:hover {
      color: #000000;
    }

    .tab.active {
      color: #000000;
      border-bottom: 2px solid #000000;
    }

    /* íƒ­ ì»¨í…ì¸  */
    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    /* ì¼ì¼ íƒ­ ìŠ¤íƒ€ì¼ */
    .daily-container {
      padding: 20px 0;
    }

    .date-display {
      text-align: center;
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 30px;
      color: #000000;
    }

    .fortune-card {
      background: #f9f9f9;
      border: 1px solid #e0e0e0;
      padding: 20px;
      margin-bottom: 20px;
    }

    .fortune-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #e0e0e0;
    }

    .fortune-row {
      display: flex;
      padding: 10px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .fortune-row:last-child {
      border-bottom: none;
    }

    .fortune-label {
      min-width: 100px;
      font-weight: 500;
      color: #666666;
    }

    .fortune-value {
      flex: 1;
      color: #000000;
    }

    /* ë‹¬ë ¥ íƒ­ ìŠ¤íƒ€ì¼ */
    .calendar-nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .calendar-nav button {
      padding: 10px 20px;
      background: #f5f5f5;
      border: none;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: background 0.2s;
    }

    .calendar-nav button:hover {
      background: #e0e0e0;
    }

    .calendar-nav h2 {
      font-size: 18px;
      font-weight: 600;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 1px;
      background: #e0e0e0;
      border: 1px solid #e0e0e0;
      margin-bottom: 30px;
    }

    .calendar-header {
      background: #f5f5f5;
      padding: 12px;
      text-align: center;
      font-size: 13px;
      font-weight: 600;
      color: #666666;
    }

    .calendar-day {
      background: #ffffff;
      padding: 12px 8px;
      min-height: 80px;
      cursor: pointer;
      transition: background 0.2s;
      position: relative;
    }

    .calendar-day:hover {
      background: #f9f9f9;
    }

    .calendar-day.other-month {
      background: #fafafa;
      cursor: default;
    }

    .calendar-day.selected {
      background: #f0f0f0;
      border: 2px solid #000000;
    }

    .day-number {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .day-info {
      font-size: 11px;
      color: #666666;
    }

    /* ì„ íƒëœ ë‚ ì§œ ìƒì„¸ ì •ë³´ */
    .selected-info {
      margin-top: 30px;
      padding: 20px;
      background: #f9f9f9;
      border: 1px solid #e0e0e0;
    }

    .selected-date-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      text-align: center;
    }

    /* ê³µë¶€ íƒ­ ìŠ¤íƒ€ì¼ */
    .study-section {
      margin-bottom: 30px;
    }

    .study-category {
      margin-bottom: 15px;
    }

    .study-category-header {
      padding: 12px 15px;
      background: #f9f9f9;
      border: 1px solid #e0e0e0;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 500;
    }

    .study-category-header:hover {
      background: #f0f0f0;
    }

    .study-category-content {
      display: none;
      padding: 15px;
      border: 1px solid #e0e0e0;
      border-top: none;
      background: #ffffff;
    }

    .study-category-content.active {
      display: block;
    }

    .term-item {
      padding: 12px 15px;
      margin-bottom: 10px;
      background: #f9f9f9;
      border: 1px solid #f0f0f0;
    }

    .term-name {
      font-weight: 600;
      margin-bottom: 5px;
      color: #000000;
    }

    .term-desc {
      font-size: 14px;
      color: #666666;
      line-height: 1.5;
    }

    /* ë‚´ì •ë³´ íƒ­ ìŠ¤íƒ€ì¼ */
    .info-section {
      margin-bottom: 40px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e0e0e0;
    }

    /* ì‚¬ì£¼í‘œ */
    .saju-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }

    .saju-table th,
    .saju-table td {
      padding: 15px;
      text-align: center;
      border: 1px solid #e0e0e0;
    }

    .saju-table th {
      background: #f9f9f9;
      font-weight: 600;
      font-size: 14px;
      color: #666666;
    }

    .saju-table td {
      font-size: 18px;
      font-weight: 600;
      background: #ffffff;
    }

    .pillar-label {
      font-size: 12px;
      color: #999999;
      display: block;
      margin-bottom: 5px;
    }

    /* ìë¯¸ë‘ìˆ˜ ì•„ì½”ë””ì–¸ */
    .jami-accordion {
      margin-top: 20px;
    }

    .jami-item {
      margin-bottom: 10px;
      border: 1px solid #e0e0e0;
    }

    .jami-header {
      padding: 15px;
      background: #f9f9f9;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-weight: 600;
    }

    .jami-header:hover {
      background: #f0f0f0;
    }

    .jami-content {
      display: none;
      padding: 20px;
      background: #ffffff;
      border-top: 1px solid #e0e0e0;
    }

    .jami-content.active {
      display: block;
    }

    .jami-subtitle {
      font-size: 14px;
      color: #666666;
      margin-bottom: 15px;
    }

    .jami-stars {
      font-weight: 600;
      margin-bottom: 15px;
      padding: 10px;
      background: #f9f9f9;
    }

    .jami-detail {
      margin-bottom: 20px;
    }

    .jami-star-name {
      font-weight: 600;
      margin-bottom: 10px;
      color: #000000;
    }

    .jami-points {
      list-style: none;
      padding-left: 0;
    }

    .jami-points li {
      padding: 8px 0;
      padding-left: 15px;
      position: relative;
      color: #333333;
      line-height: 1.6;
    }

    .jami-points li:before {
      content: "â€¢";
      position: absolute;
      left: 0;
      color: #666666;
    }

    .jami-summary {
      margin-top: 15px;
      padding: 15px;
      background: #f9f9f9;
      border-left: 3px solid #000000;
      font-weight: 500;
    }

    /* ëŒ€ìš´ ì„¹ì…˜ */
    .daeun-item {
      margin-bottom: 20px;
      padding: 15px;
      background: #f9f9f9;
      border-left: 3px solid #666666;
    }

    .daeun-header {
      font-weight: 600;
      margin-bottom: 8px;
      font-size: 15px;
    }

    .daeun-desc {
      color: #333333;
      line-height: 1.6;
    }

    /* ìƒì• ì£¼ê¸° */
    .cycle-item {
      margin-bottom: 25px;
      padding: 20px;
      background: #ffffff;
      border: 1px solid #e0e0e0;
    }

    .cycle-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .cycle-period {
      font-size: 18px;
      font-weight: 600;
    }

    .cycle-age {
      font-size: 14px;
      color: #666666;
    }

    .cycle-keywords {
      margin-bottom: 15px;
      padding: 10px 15px;
      background: #f9f9f9;
      font-weight: 500;
    }

    .cycle-summary {
      color: #333333;
      line-height: 1.7;
      margin-bottom: 15px;
    }

    .cycle-detail {
      margin-bottom: 10px;
      padding: 10px;
      background: #fafafa;
      font-size: 14px;
      line-height: 1.6;
    }

    .cycle-detail strong {
      display: block;
      margin-bottom: 5px;
      color: #000000;
    }

    /* ì—ëŸ¬ ë©”ì‹œì§€ */
    .error {
      padding: 20px;
      text-align: center;
      color: #999999;
    }

    /* í™”ì‚´í‘œ ì•„ì´ì½˜ */
    .arrow {
      transition: transform 0.2s;
    }

    .arrow.active {
      transform: rotate(90deg);
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ë§Œì„¸ë ¥ ë‹¬ë ¥</h1>
      <p class="subtitle">í•œêµ­ ì „í†µ ë§Œì„¸ë ¥ ê¸°ë°˜ ìš´ì„¸ ì¡°íšŒ</p>
    </header>

    <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
    <div class="tabs">
      <button class="tab active" onclick="switchTab('daily')">ì¼ì¼</button>
      <button class="tab" onclick="switchTab('calendar')">ë‹¬ë ¥</button>
      <button class="tab" onclick="switchTab('study')">ê³µë¶€</button>
      <button class="tab" onclick="switchTab('myinfo')">ë‚´ì •ë³´</button>
    </div>

    <!-- ì¼ì¼ íƒ­ -->
    <div id="tab-daily" class="tab-content active">
      <div class="daily-container">
        <div class="date-display" id="dailyDate">2026ë…„ 3ì›” 1ì¼</div>
        <div id="dailyFortune"></div>
      </div>
    </div>

    <!-- ë‹¬ë ¥ íƒ­ -->
    <div id="tab-calendar" class="tab-content">
      <div class="calendar-nav">
        <button onclick="changeMonth(-1)">â—€ ì´ì „</button>
        <h2 id="currentMonth">2026ë…„ 3ì›”</h2>
        <button onclick="changeMonth(1)">ë‹¤ìŒ â–¶</button>
      </div>

      <div class="calendar-grid" id="calendarGrid">
        <div class="calendar-header">ì¼</div>
        <div class="calendar-header">ì›”</div>
        <div class="calendar-header">í™”</div>
        <div class="calendar-header">ìˆ˜</div>
        <div class="calendar-header">ëª©</div>
        <div class="calendar-header">ê¸ˆ</div>
        <div class="calendar-header">í† </div>
      </div>

      <!-- ì„ íƒëœ ë‚ ì§œ ìƒì„¸ ì •ë³´ -->
      <div id="selectedInfo" style="display: none;">
        <div class="selected-info">
          <div class="selected-date-title" id="selectedDateTitle"></div>
          <div id="selectedFortune"></div>
        </div>
      </div>
    </div>

    <!-- ê³µë¶€ íƒ­ -->
    <div id="tab-study" class="tab-content">
      <div class="study-section" id="studyContent"></div>
    </div>

    <!-- ë‚´ì •ë³´ íƒ­ -->
    <div id="tab-myinfo" class="tab-content">
      <div class="info-section">
        <div class="section-title">ì‚¬ì£¼ ì •ë³´</div>
        <table class="saju-table" id="sajuTable">
          <tr>
            <th></th>
            <th>ìƒì‹œ</th>
            <th>ìƒì¼</th>
            <th>ìƒì›”</th>
            <th>ìƒë…„</th>
          </tr>
          <tr>
            <th>ì²œê°„</th>
            <td>ê²½åºš<br><span style="font-size: 12px; color: #999;">+ê¸ˆ</span></td>
            <td>ì„å£¬<br><span style="font-size: 12px; color: #999;">+ìˆ˜</span></td>
            <td>ì„å£¬<br><span style="font-size: 12px; color: #999;">+ìˆ˜</span></td>
            <td>ì‹ è¾›<br><span style="font-size: 12px; color: #999;">-ê¸ˆ</span></td>
          </tr>
          <tr>
            <th>ì‹­ì„±</th>
            <td>í¸ì¸</td>
            <td>ë¹„ê²</td>
            <td>ë¹„ê²</td>
            <td>ì •ì¸</td>
          </tr>
          <tr>
            <th>ì§€ì§€</th>
            <td>ìˆ æˆŒ<br><span style="font-size: 12px; color: #999;">+í† </span></td>
            <td>ìˆ æˆŒ<br><span style="font-size: 12px; color: #999;">+í† </span></td>
            <td>ì§„è¾°<br><span style="font-size: 12px; color: #999;">+í† </span></td>
            <td>ë¯¸æœª<br><span style="font-size: 12px; color: #999;">-í† </span></td>
          </tr>
          <tr>
            <th>ì‹­ì„±</th>
            <td>í¸ê´€</td>
            <td>í¸ê´€</td>
            <td>í¸ê´€</td>
            <td>ì •ê´€</td>
          </tr>
          <tr>
            <th>ì§€ì¥ê°„</th>
            <td>ì‹ ì •ë¬´</td>
            <td>ì‹ ì •ë¬´</td>
            <td>ì„ê³„ë¬´</td>
            <td>ì •ì„ê¸°</td>
          </tr>
          <tr>
            <th>12ìš´ì„±</th>
            <td>ê´€ëŒ€</td>
            <td>ê´€ëŒ€</td>
            <td>ë¬˜</td>
            <td>ì–‘</td>
          </tr>
          <tr>
            <th>12ì‹ ì‚´</th>
            <td>ì²œì‚´</td>
            <td>ì²œì‚´</td>
            <td>ë°˜ì•ˆì‚´</td>
            <td>ë°˜ì•ˆì‚´</td>
          </tr>
        </table>
      </div>

      <!-- ì‚¬ì£¼ ìƒì„¸ ì„¤ëª… í† ê¸€ -->
      <div style="margin-top: 15px;">
        <div class="study-category">
          <div class="study-category-header" onclick="toggleSajuDetail()">
            <span>ìƒì„¸ ì„¤ëª…</span>
            <span class="arrow" id="sajuDetailArrow">â–¶</span>
          </div>
          <div class="study-category-content" id="sajuDetailContent">
            <div id="sajuDescription" style="padding: 15px; line-height: 1.8; font-size: 14px;"></div>
          </div>
        </div>
      </div>

      <div class="info-section">
        <div class="section-title">ì‹ ì‚´ê³¼ ê¸¸ì„±</div>
        
        <!-- ì‚´í’€ì´ ìƒì„¸ ì„¤ëª… (í† ê¸€ ì—†ì´ ë°”ë¡œ í‘œì‹œ) -->
        <div id="salpuriDescription" style="padding: 15px; line-height: 1.8; font-size: 14px; margin-bottom: 20px;"></div>
        
        <table class="saju-table" id="salpuriTable">
          <tr>
            <th></th>
            <th>ìƒì‹œ</th>
            <th>ìƒì¼</th>
            <th>ìƒì›”</th>
            <th>ìƒë…„</th>
          </tr>
          <tr>
            <th>ì²œê°„</th>
            <td>ê²½åºš</td>
            <td></td>
            <td></td>
            <td>ì‹ è¾›</td>
          </tr>
          <tr>
            <th>ê¸¸ì„±</th>
            <td>ê´´ê°•ì‚´</td>
            <td>ì²œë•ê·€ì¸<br>ì›”ë•ê·€ì¸<br>ê´´ê°•ì‚´<br>ë°±í˜¸ëŒ€ì‚´</td>
            <td>ê´´ê°•ì‚´</td>
            <td>í˜„ì¹¨ì‚´</td>
          </tr>
          <tr>
            <th>ì§€ì§€</th>
            <td>ìˆ æˆŒ</td>
            <td>ìˆ æˆŒ</td>
            <td>ì§„è¾°</td>
            <td>ë¯¸æœª</td>
          </tr>
          <tr>
            <th>ê¸¸ì„±</th>
            <td>í™”ê°œì‚´<br>ì²œë¬¸ì„±<br>ê´´ê°•ì‚´</td>
            <td>í™”ê°œì‚´<br>ì²œë¬¸ì„±<br>ê´´ê°•ì‚´<br>ë°±í˜¸ëŒ€ì‚´</td>
            <td>í™”ê°œì‚´<br>ê´´ê°•ì‚´</td>
            <td>í™”ê°œì‚´<br>í˜„ì¹¨ì‚´</td>
          </tr>
        </table>
      </div>

      <div class="info-section">
        <div class="section-title">ìë¯¸ë‘ìˆ˜ (ç´«å¾®æ–—æ•¸)</div>
        <div class="jami-accordion" id="jamiAccordion"></div>
      </div>

      <div class="info-section">
        <div class="section-title">ìš´ì„¸ ì„¤ëª…</div>
        
        <div class="study-category">
          <div class="study-category-header" onclick="toggleFortuneSection(0)">
            <span>ì´ˆë…„ìš´ (~36ì„¸)</span>
            <span class="arrow" id="fortune-arrow-0">â–¶</span>
          </div>
          <div class="study-category-content" id="fortune-content-0">
            <div id="cycle-chonyeon"></div>
          </div>
        </div>

        <div class="study-category">
          <div class="study-category-header" onclick="toggleFortuneSection(1)">
            <span>ì¤‘ë…„ìš´ (37~56ì„¸)</span>
            <span class="arrow" id="fortune-arrow-1">â–¶</span>
          </div>
          <div class="study-category-content" id="fortune-content-1">
            <div id="cycle-jungnyeon"></div>
          </div>
        </div>

        <div class="study-category">
          <div class="study-category-header" onclick="toggleFortuneSection(2)">
            <span>ë§ë…„ìš´ (57ì„¸~)</span>
            <span class="arrow" id="fortune-arrow-2">â–¶</span>
          </div>
          <div class="study-category-content" id="fortune-content-2">
            <div id="cycle-malnyeon"></div>
          </div>
        </div>

        <div class="study-category">
          <div class="study-category-header" onclick="toggleFortuneSection(3)">
            <span>ëŒ€ìš´ (10ë…„ ì£¼ê¸°)</span>
            <span class="arrow" id="fortune-arrow-3">â–¶</span>
          </div>
          <div class="study-category-content" id="fortune-content-3">
            <div id="daeunList"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ì „ì—­ ë³€ìˆ˜
    let koreaData = {};
    let jamiData = {};
    let dictionaryData = {};
    let lifePhaseData = {};
    let sajuDetailData = {};
    let currentYear = 2026;
    let currentMonth = 3;
    let selectedDate = null;

    // ë°ì´í„° ë¡œë“œ
    async function loadData() {
      try {
        const [koreaRes, jamiRes, dictRes, lifeRes, sajuRes] = await Promise.all([
          fetch('./data/korea_data_sample.json'),
          fetch('./data/jami_data_sample.json'),
          fetch('./data/dictionary_FINAL.json'),
          fetch('./data/life_phase_fortune_sample.json'),
          fetch('./data/saju_detail_sample.json')
        ]);

        koreaData = await koreaRes.json();
        jamiData = await jamiRes.json();
        dictionaryData = await dictRes.json();
        lifePhaseData = await lifeRes.json();
        sajuDetailData = await sajuRes.json();

        // ì´ˆê¸° ë Œë”ë§
        renderDaily();
        renderCalendar();
        renderStudy();
        renderMyInfo();
      } catch (error) {
        console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
        document.querySelector('.container').innerHTML = '<div class="error">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</div>';
      }
    }

    // íƒ­ ì „í™˜
    function switchTab(tabName) {
      // íƒ­ ë²„íŠ¼
      document.querySelectorAll('.tab').forEach(tab => {
        tab.classList.remove('active');
      });
      event.currentTarget.classList.add('active');

      // íƒ­ ì»¨í…ì¸ 
      document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
      });
      document.getElementById(`tab-${tabName}`).classList.add('active');
    }

    // ì¼ì¼ íƒ­ ë Œë”ë§
    function renderDaily() {
      const dateStr = '2026-03-01';
      const data = koreaData[dateStr];

      if (!data) {
        document.getElementById('dailyFortune').innerHTML = '<div class="error">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
        return;
      }

      const html = `
        <div class="fortune-card">
          <div class="fortune-row">
            <div class="fortune-label">ì¼ì§„</div>
            <div class="fortune-value">${data.day_ganzhi}</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">ì‹­ì„±</div>
            <div class="fortune-value">${data.ten_god_plain} (${data.ten_god})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">ì§€ì§€ ê´€ê³„</div>
            <div class="fortune-value">${data.relation_earthly_plain} (${data.relation_earthly})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">12ì‹ ì‚´</div>
            <div class="fortune-value">${data.twelve_shinsal_plain} (${data.twelve_shinsal})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">12ìš´ì„±</div>
            <div class="fortune-value">${data.twelve_woonsung_plain} (${data.twelve_woonsung})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">28ìˆ˜</div>
            <div class="fortune-value">${data.constellation_28_plain} (${data.constellation_28})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">ì¡°ì–¸</div>
            <div class="fortune-value">${data.advice}</div>
          </div>
        </div>
      `;

      document.getElementById('dailyFortune').innerHTML = html;
    }

    // ë‹¬ë ¥ ë Œë”ë§
    function renderCalendar() {
      const firstDay = new Date(currentYear, currentMonth - 1, 1).getDay();
      const daysInMonth = new Date(currentYear, currentMonth, 0).getDate();
      
      const grid = document.getElementById('calendarGrid');
      
      // í—¤ë”ëŠ” ìœ ì§€í•˜ê³  ë‚ ì§œë§Œ ì œê±°
      while (grid.children.length > 7) {
        grid.removeChild(grid.lastChild);
      }
      
      // ì´ì „ ë‹¬ ë¹ˆì¹¸
      for (let i = 0; i < firstDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.className = 'calendar-day other-month';
        grid.appendChild(emptyDay);
      }
      
      // í˜„ì¬ ë‹¬ ë‚ ì§œ
      for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${currentYear}-${String(currentMonth).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const dayData = koreaData[dateStr];
        
        const dayDiv = document.createElement('div');
        dayDiv.className = 'calendar-day';
        dayDiv.onclick = () => selectDate(dateStr);
        
        const dayNumber = document.createElement('div');
        dayNumber.className = 'day-number';
        dayNumber.textContent = day;
        dayDiv.appendChild(dayNumber);
        
        // ì‹­ì„± í‘œì‹œ ì œê±° - ë‚ ì§œë§Œ í‘œì‹œ
        
        grid.appendChild(dayDiv);
      }
      
      document.getElementById('currentMonth').textContent = `${currentYear}ë…„ ${currentMonth}ì›”`;
    }

    // ì›” ë³€ê²½
    function changeMonth(delta) {
      currentMonth += delta;
      if (currentMonth > 12) {
        currentMonth = 1;
        currentYear++;
      } else if (currentMonth < 1) {
        currentMonth = 12;
        currentYear--;
      }
      renderCalendar();
      document.getElementById('selectedInfo').style.display = 'none';
    }

    // ë‚ ì§œ ì„ íƒ
    function selectDate(dateStr) {
      selectedDate = dateStr;
      const data = koreaData[dateStr];
      
      if (!data) {
        alert('í•´ë‹¹ ë‚ ì§œì˜ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
        return;
      }

      // ì„ íƒ í‘œì‹œ
      document.querySelectorAll('.calendar-day').forEach(day => {
        day.classList.remove('selected');
      });
      event.currentTarget.classList.add('selected');

      // ë‚ ì§œ í‘œì‹œ
      const [year, month, day] = dateStr.split('-');
      document.getElementById('selectedDateTitle').textContent = `${year}ë…„ ${parseInt(month)}ì›” ${parseInt(day)}ì¼`;

      // ìƒì„¸ ì •ë³´ í‘œì‹œ
      const html = `
        <div class="fortune-card">
          <div class="fortune-row">
            <div class="fortune-label">ì¼ì§„</div>
            <div class="fortune-value">${data.day_ganzhi}</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">ì‹­ì„±</div>
            <div class="fortune-value">${data.ten_god_plain} (${data.ten_god})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">ì§€ì§€ ê´€ê³„</div>
            <div class="fortune-value">${data.relation_earthly_plain} (${data.relation_earthly})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">12ì‹ ì‚´</div>
            <div class="fortune-value">${data.twelve_shinsal_plain} (${data.twelve_shinsal})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">12ìš´ì„±</div>
            <div class="fortune-value">${data.twelve_woonsung_plain} (${data.twelve_woonsung})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">28ìˆ˜</div>
            <div class="fortune-value">${data.constellation_28_plain} (${data.constellation_28})</div>
          </div>
          <div class="fortune-row">
            <div class="fortune-label">ì¡°ì–¸</div>
            <div class="fortune-value">${data.advice}</div>
          </div>
        </div>
      `;

      document.getElementById('selectedFortune').innerHTML = html;
      document.getElementById('selectedInfo').style.display = 'block';
      
      // ìŠ¤í¬ë¡¤
      document.getElementById('selectedInfo').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // ê³µë¶€ íƒ­ ë Œë”ë§
    function renderStudy() {
      const categories = [
        { key: 'ten_gods', title: 'ì‹­ì„± (åæ˜Ÿ)' },
        { key: 'constellation_28', title: '28ìˆ˜ (äºŒåå…«å®¿)' },
        { key: 'earthly_relation', title: 'ì§€ì§€ê´€ê³„' },
        { key: 'twelve_woonsung', title: '12ìš´ì„± (åäºŒé‹æ˜Ÿ)' },
        { key: 'twelve_shinsal', title: '12ì‹ ì‚´ (åäºŒç¥æ®º)' }
      ];

      let html = '';

      categories.forEach((cat, index) => {
        const terms = dictionaryData[cat.key];
        if (!terms) return;

        html += `
          <div class="study-category">
            <div class="study-category-header" onclick="toggleStudyCategory(${index})">
              <span>${cat.title}</span>
              <span class="arrow" id="arrow-${index}">â–¶</span>
            </div>
            <div class="study-category-content" id="content-${index}">
        `;

        for (const [term, desc] of Object.entries(terms)) {
          html += `
            <div class="term-item">
              <div class="term-name">${term}</div>
              <div class="term-desc">${desc}</div>
            </div>
          `;
        }

        html += `
            </div>
          </div>
        `;
      });

      document.getElementById('studyContent').innerHTML = html;
    }

    // ê³µë¶€ ì¹´í…Œê³ ë¦¬ í† ê¸€
    function toggleStudyCategory(index) {
      const content = document.getElementById(`content-${index}`);
      const arrow = document.getElementById(`arrow-${index}`);
      
      content.classList.toggle('active');
      arrow.classList.toggle('active');
    }

    // ë‚´ì •ë³´ íƒ­ ë Œë”ë§ (JSON ê¸°ë°˜)
    function renderMyInfo() {
      // ì‚¬ì£¼ ìƒì„¸ ì„¤ëª…
      renderSajuDetail();

      // ì‚´í’€ì´ ìƒì„¸ ì„¤ëª…
      renderSalpuriDetail();

      // ìë¯¸ë‘ìˆ˜
      renderJami();

      // ìƒì• ì£¼ê¸° & ëŒ€ìš´
      renderLifePhase();
    }

    // ì‚¬ì£¼ ìƒì„¸ ì„¤ëª… ë Œë”ë§
    function renderSajuDetail() {
      if (!sajuDetailData.saju_description) return;

      const desc = sajuDetailData.saju_description;
      const pillars = sajuDetailData.four_pillars;

      let html = `
        <h3 style="font-size: 16px; font-weight: 600; margin-bottom: 15px;">${desc.title}</h3>
        <div style="margin-bottom: 15px; padding: 12px; background: #f9f9f9; border-left: 3px solid #666;">
          <strong>${desc.main_element.day_master}</strong><br>
          <span style="color: #666;">${desc.main_element.description}</span>
        </div>
        <p style="margin-bottom: 20px; color: #333;">${desc.overall}</p>
      `;

      // ì‚¬ì£¼ êµ¬ì¡°
      if (desc.structure) {
        html += `
          <div style="margin-bottom: 15px;">
            <strong>êµ¬ì¡°:</strong> ${desc.structure}
          </div>
        `;
      }

      // 4ì£¼ ì„¤ëª…
      const pillarOrder = ['hour', 'day', 'month', 'year'];
      pillarOrder.forEach(key => {
        const pillar = pillars[key];
        if (!pillar) return;

        html += `
          <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid #e0e0e0;">
            <h4 style="font-size: 15px; font-weight: 600; margin-bottom: 8px;">${pillar.title}</h4>
            <div style="font-size: 13px; color: #999; margin-bottom: 12px;">${pillar.subtitle}</div>
        `;

        // ì²œê°„ ì„¤ëª…
        if (pillar.heavenly_stem && pillar.heavenly_stem.stars) {
          html += `<div style="margin-bottom: 12px;"><strong>â€¢ ${pillar.heavenly_stem.code}</strong></div>`;
          pillar.heavenly_stem.stars.forEach(star => {
            html += `
              <div style="margin-bottom: 10px; padding-left: 15px;">
                <strong style="color: #000;">${star.name}:</strong>
                <span style="color: #666;"> ${star.description}</span>
              </div>
            `;
          });
        }

        // ì§€ì§€ ì„¤ëª…
        if (pillar.earthly_branch && pillar.earthly_branch.stars) {
          html += `<div style="margin: 15px 0 12px 0;"><strong>â€¢ ${pillar.earthly_branch.code}</strong></div>`;
          pillar.earthly_branch.stars.forEach(star => {
            html += `
              <div style="margin-bottom: 10px; padding-left: 15px;">
                <strong style="color: #000;">${star.name}:</strong>
                <span style="color: #666;"> ${star.description}</span>
              </div>
            `;
          });
        }

        html += `</div>`;
      });

      document.getElementById('sajuDescription').innerHTML = html;
    }

    // ì‚´í’€ì´ ìƒì„¸ ì„¤ëª… ë Œë”ë§
    function renderSalpuriDetail() {
      if (!sajuDetailData.sal_summary) return;

      const summary = sajuDetailData.sal_summary;
      
      let html = `
        <!-- ì£¼ìš” ì‚´ TOP ë°•ìŠ¤ -->
        <div style="padding: 15px; background: #f9f9f9; border: 1px solid #e0e0e0;">
          <div style="font-weight: 600; margin-bottom: 12px; font-size: 15px;">ğŸ’¡ ì£¼ìš” ì‚´ TOP ${summary.top_sal.length}</div>
          <div style="line-height: 2; font-size: 14px;">
      `;

      summary.top_sal.forEach(sal => {
        html += `
          <strong>${sal.rank}. ${sal.name} ${sal.icon} (${sal.count})</strong><br>
          <span style="color: #666; font-size: 13px;">
          ìœ„ì¹˜: ${sal.locations}<br>
          ì˜ë¯¸: ${sal.meaning}<br>
          ì¥ì : ${sal.pros}<br>
          ${sal.cons ? `ì£¼ì˜: ${sal.cons}<br>` : ''}
          </span><br>
        `;
      });

      html += `
          <div style="padding: 10px; background: #ffffff; border-left: 3px solid #666; margin-top: 10px;">
            <strong>${summary.key_point}</strong><br>
            <span style="color: #666;">${summary.one_line_summary}</span>
          </div>
        </div>
      </div>
      `;

      document.getElementById('salpuriDescription').innerHTML = html;
    }

    // ì‚¬ì£¼ ìƒì„¸ ì„¤ëª… í† ê¸€
    function toggleSajuDetail() {
      const content = document.getElementById('sajuDetailContent');
      const arrow = document.getElementById('sajuDetailArrow');
      
      content.classList.toggle('active');
      arrow.classList.toggle('active');
    }

    // ìë¯¸ë‘ìˆ˜ ë Œë”ë§ (jami_data_sample.json ê¸°ë°˜)
    function renderJami() {
      let html = '';
      let index = 0;

      for (const [palace, data] of Object.entries(jamiData)) {
        html += `
          <div class="jami-item">
            <div class="jami-header" onclick="toggleJami(${index})">
              <div>
                <div style="font-weight: 600; margin-bottom: 4px;">${palace} <span style="font-size: 13px; color: #666; font-weight: 400;">(${data.subtitle})</span></div>
                <div style="font-size: 13px; color: #666;">${data.stars}</div>
              </div>
              <span class="arrow" id="jami-arrow-${index}">â–¶</span>
            </div>
            <div class="jami-content" id="jami-content-${index}">
        `;

        if (data.details && data.details.length > 0) {
          data.details.forEach(detail => {
            if (detail.star) {
              html += `<div class="jami-detail">`;
              html += `<div class="jami-star-name">${detail.star}</div>`;
            }
            
            if (detail.points && detail.points.length > 0) {
              html += `<ul class="jami-points">`;
              detail.points.forEach(point => {
                html += `<li>${point}</li>`;
              });
              html += `</ul>`;
            }
            
            if (detail.star) {
              html += `</div>`;
            }
          });
        }

        html += `
              <div class="jami-summary">${data.summary}</div>
            </div>
          </div>
        `;
        index++;
      }

      document.getElementById('jamiAccordion').innerHTML = html;
    }

    // ìë¯¸ë‘ìˆ˜ í† ê¸€
    function toggleJami(index) {
      const content = document.getElementById(`jami-content-${index}`);
      const arrow = document.getElementById(`jami-arrow-${index}`);
      
      content.classList.toggle('active');
      arrow.classList.toggle('active');
    }

    // ìš´ì„¸ ì„¹ì…˜ í† ê¸€
    function toggleFortuneSection(index) {
      const content = document.getElementById(`fortune-content-${index}`);
      const arrow = document.getElementById(`fortune-arrow-${index}`);
      
      content.classList.toggle('active');
      arrow.classList.toggle('active');
    }

    // ìƒì• ì£¼ê¸° & ëŒ€ìš´ ë Œë”ë§ (life_phase_fortune_sample.json ê¸°ë°˜)
    function renderLifePhase() {
      if (!lifePhaseData.life_cycles) return;

      // ìƒì• ì£¼ê¸°ë¥¼ ì´ˆë…„/ì¤‘ë…„/ë§ë…„ìœ¼ë¡œ ë¶„ë¦¬
      lifePhaseData.life_cycles.forEach(cycle => {
        let targetId = '';
        if (cycle.period === 'ì´ˆë…„ìš´') targetId = 'cycle-chonyeon';
        else if (cycle.period === 'ì²­ë…„ìš´') targetId = 'cycle-chonyeon'; // ì²­ë…„ìš´ë„ ì´ˆë…„ìš´ì— í¬í•¨
        else if (cycle.period === 'ì¤‘ë…„ìš´') targetId = 'cycle-jungnyeon';
        else if (cycle.period === 'ë§ë…„ìš´') targetId = 'cycle-malnyeon';
        
        if (!targetId) return;

        let html = `
          <div class="cycle-item">
            <div class="cycle-header">
              <div class="cycle-period">${cycle.period}</div>
              <div class="cycle-age">${cycle.age_range}</div>
            </div>
            <div class="cycle-keywords">í‚¤ì›Œë“œ: ${cycle.keywords.join(', ')}</div>
            <div class="cycle-summary">${cycle.summary}</div>
        `;

        if (cycle.environment) {
          html += `<div class="cycle-detail"><strong>í™˜ê²½:</strong> ${cycle.environment}</div>`;
        }
        if (cycle.inner_state) {
          html += `<div class="cycle-detail"><strong>ë‚´ë©´:</strong> ${cycle.inner_state}</div>`;
        }
        if (cycle.current_situation) {
          html += `<div class="cycle-detail"><strong>í˜„ì¬:</strong> ${cycle.current_situation}</div>`;
        }
        if (cycle.characteristics) {
          html += `<div class="cycle-detail"><strong>íŠ¹ì§•:</strong> ${cycle.characteristics}</div>`;
        }
        if (cycle.period_description) {
          html += `<div class="cycle-detail"><strong>ì‹œê¸°:</strong> ${cycle.period_description}</div>`;
        }

        html += `</div>`;

        const targetEl = document.getElementById(targetId);
        if (targetEl) {
          targetEl.innerHTML += html;
        }
      });

      // ëŒ€ìš´
      if (lifePhaseData.daeun_list) {
        let daeunHTML = '';
        
        lifePhaseData.daeun_list.forEach(daeun => {
          daeunHTML += `
            <div class="daeun-item">
              <div class="daeun-header">
                ${daeun.age_range} - ${daeun.pillar} (${daeun.main_energy})
              </div>
              <div class="daeun-desc">${daeun.description}</div>
            </div>
          `;
        });

        document.getElementById('daeunList').innerHTML = daeunHTML;
      }
    }

    // ì´ˆê¸°í™”
    window.onload = function() {
      loadData();
    };
  </script>
</body>
</html>
